---
title: Save/Load Layout
page_title: Save/Load Layout
description: Save/Load Layout
slug: radlayoutcontrol-features-save-load-layout
tags: serialization, save, load, saving, loading, layout
published: True
position: 2
---

# Save/Load Layout

__RadLayoutControl__ supports saving and loading the state of the layout. This can be done via the __SaveToXmlString()__ and __LoadFromXamlString()__ methods of __RadLayoutControl__. The control is serialized into an XML string and it is deserialized from one.

In order to serialize the layout you will need to set the __RadLayoutControl.SerializationId__ attached property on the RadLayoutControl and all layout groups and UIElements that you want to save.

> All SerializaionIds must be unique.

#### __[XAML] Example 1: Setting SerializationId in XAML__
{{region layoutcontrol-features-serializaion-01}}
	<telerik:RadLayoutControl telerik:RadLayoutControl.SerializationId="myLayoutControlID">
{{endregion}}

## Saving the layout

The layout can be saved via the __SaveToXmlString()__ method.

#### __[C#] Example 2: Saving the layout__
{{region layoutcontrol-features-serializaion-02}}
	string serializationString = this.layoutControl.SaveToXmlString();
{{endregion}}

The groups that are generated automatically at runtime are also serialized, but their SerializationId is not set. If you want the serialization/deserialization to work properly you will need to manually set the __SerializationId__ in the __ElementSaving__ event of __RadLayoutControl__.
	
#### __[C#] Example 3: Setting SerializationId in code__
{{region layoutcontrol-features-serializaion-03}}
	private void layoutControl_ElementSaving(object sender, Telerik.Windows.Controls.LayoutControl.Serialization.LayoutElementSavingEventArgs e)
	{
		string serializationId = RadLayoutControl.GetSerializationId(e.Element);
		if (String.IsNullOrEmpty(serializationId))
		{
			serializationId = Guid.NewGuid().ToString();
			RadLayoutControl.SetSerializationId(e.Element, serializationId);
		}
	}
{{endregion}}
	
## Loading the layout

The layout can be saved via the __LoadFromXmlString()__ method.

#### __[C#] Example 4: Loading the layout__
{{region layoutcontrol-features-serializaion-04}}
	this.layoutControl.LoadFromXmlString(serializationString);
{{endregion}}

## List of default saved properties

The serialization process automatically saves the following common properties of RadLayoutControl, all UIElements and layout groups that participate in the layout.

* Width
* Height
* MinWidth
* MinHeight
* HorizontalAlignment
* VerticalAlignment
* RadLayoutControl.SerializationId

The serialization saves the __Orientation__ and __IsAutoGenerated__ properties of RadLayoutControl and __all layout groups__. There are few additional properties specific for the different layout groups that are saved. You can find them in the following list.

* __RadLayoutControl__
	* IsInEditMode
* __LayoutControlExpanderGroup__	
	* Header
	* IsExpanded
	* IsExpandable
* __LayoutControlTabGroupItem__
	* Header
	* Content
	* IsSelected

> The __Header__ and __Content__ properties are saved as __string__.

<!-- -->

> You can see how to save custom properties or replace the value of a serialized/deserialized property in the [Save custom properties](#save-custom-properties) section of this article.
	
## Events

__RadLayoutControl__ exposes several events relevant to the serialization process. They are fired for each saved element from the layout.

* __ElementSaving__: This event occurs when an element saving operation starts. It can be used to cancel the saving process. The event arguments are of type __LayoutElementSavingEventArgs__ and expose the following properties:
	* __Cancel__: A __bool__ property that gets or sets whether the serialization should be canceled.
	* __Element__: A property of type __FrameworkElement__ that gets the element that is currently being saved.
	* __Info__: A property of type __SerializationInfo__ that gets the information that is saved. At this point the serialization info is empty.
	
* __ElementSaved__: This event occurs when the saving operation is complete and the element is saved. The event arguments are of type __LayoutElementSerializationEventArgs__ and expose the following properties:
	* __Element__: A property of type __FrameworkElement__ that gets the saved element.
	* __Info__: A property of type __SerializationInfo__ that gets the information that is saved.
	
* __ElementLoading__: This event occurs when an element loading operation starts. It can be used to cancel the loading process. The event arguments are of type __LayoutElementLoadingEventArgs__ and expose the following properties:
	* __Cancel__: A __bool__ property that gets or sets whether the deserialization should be canceled.
	* __Element__: A property of type __FrameworkElement__ that gets the element that is currently being loaded.
	* __Info__: A property of type __SerializationInfo__ that gets the information that is loaded.

* __ElementLoaded__: This event occurs when the loading operation is complete and the element is loaded. The event arguments are of type __LayoutElementSerializationEventArgs__ and expose the following properties:
	* __Element__: A property of type __FrameworkElement__ that gets the loaded element.
	* __Info__: A property of type __SerializationInfo__ that gets the information that is loaded.

## Saving and loading custom properties

You can use the __ElementSaving__ or the __ElementSaved__ events to save a custom property. And then __ElementLoading__ or __ElementLoaded__ to load it.

#### __[C#] Example 5: Saving custom property__
{{region layoutcontrol-features-serializaion-05}}
	private void layoutControl_ElementSaving(object sender, Telerik.Windows.Controls.LayoutControl.Serialization.LayoutElementSavingEventArgs e)
	{
		// save a custom property
		e.Info["Opacity"] = e.Element.Opacity;
	}
	
	private void layoutControl_ElementLoading(object sender, Telerik.Windows.Controls.LayoutControl.Serialization.LayoutElementLoadingEventArgs e)
	{
		// load and set the property
		var opacity = e.Info["Opacity"];
		e.Element.Opacity = double.Parse(opacity.ToString());
	}
{{endregion}}
	
You can also use the serialization events to replace the value of any of the automatically saved/loaded properties.

#### __[C#] Example 6: Replacing the value of a saved property__	
{{region layoutcontrol-features-serializaion-06}}
	private void layoutControl_ElementSaved(object sender, Telerik.Windows.Controls.LayoutControl.Serialization.LayoutElementSerializationEventArgs e)
	{
		// replace the value of the VerticalAlignment property saved in the SerializationInfo object
		e.Info["VerticalAlignment"] = VerticalAlignment.Top;		
	}
{{endregion}}

Note that you can use the __Element__ property of the __ElementLoading__ event arguments and replace it with another element. This could be useful in a scenario where the Element property is __null__.

## Cancel saving and loading

You can use the __ElementLoading__ and __ElementSaving__ events to prevent the serialization/deserialization process. 

#### __[C#] Example 7: Cancel loading__	
{{region layoutcontrol-features-serializaion-07}}
	private void layoutControl_ElementLoading(object sender, Telerik.Windows.Controls.LayoutControl.Serialization.LayoutElementLoadingEventArgs e)
	{	
		e.Cancel = true;
	}
{{endregion}}
	
> The elements in the RadLayoutControl are cleared before the ElementLoading event is invoked. If you cancel it the corresponding element (e.Element) won't be re-added in the visual tree.

#### __[C#] Example 8: Cancel saving__	
{{region layoutcontrol-features-serializaion-08}}
	private void layoutControl_ElementSaving(object sender, Telerik.Windows.Controls.LayoutControl.Serialization.LayoutElementSavingEventArgs e)
	{
		e.Cancel = true;	
	}
{{endregion}}

<br />
> The serialization process saves only the state of element presented in the visual tree. If the deserialized element is removed from the tree, a new instance won't be created.
	
# See Also
* [Getting Started]({%slug radlayoutcontrol-getting-started%})
* [Edit the Layout]({%slug radlayoutcontrol-edit-the-layout%})
* [Layout Groups Overview]({%slug radlayoutcontrol-features-layoutgroups-overview%})
