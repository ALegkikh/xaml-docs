<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>DateTimeGroupDescription</title>
        <link rel="shortcut icon" href="/devtools/silverlight/favicon.ico"/>
        <meta name="description" content="DateTimeGroupDescription">
        <link href="http://cdn.kendostatic.com/2014.2.716/styles/kendo.common.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="/devtools/silverlight/assets/styles-5bdcfd475585f36df16a95e0457f2f6f.css">
        <link rel="stylesheet" href="/devtools/silverlight/assets/theme-d2ae4bb8495446e1d4605832601ddc1a.css">
        <link rel="stylesheet" href="/devtools/silverlight/assets/branding-a6bed66550d3e9b437d7b25da3bd997a.css">
        <link rel="stylesheet" href="/devtools/silverlight/assets/highlight-49ceada082f1c903edb130c25d09cf1f.css">
        <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="http://cdn.kendostatic.com/2014.2.716/js/kendo.web.min.js"></script>
        <script src="/devtools/silverlight/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/silverlight/assets/app-552278fa51da4b2d25adc25f9fec90be.js"></script>
		<script src="/devtools/silverlight/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/silverlight/assets/branding-59377013fb75f02a1dbffd638033ef6d.js"></script>
    </head>
    <body class="faux-columns">
        <!-- Google Tag Manager -->
        <noscript>
            <iframe src="//www.googletagmanager.com/ns.html?id=GTM-6X92" height="0" width="0" style="display: none; visibility: hidden"></iframe>
        </noscript>
        <script>(function(w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-6X92');</script>
        <!-- End Google Tag Manager -->
        <header id="page-header">
             <div id="page-header">

	<div id="logo-bar-sl">
		<a href="http://www.telerik.com" target="_blank" title="UI for Silverlight">
			<span>UI for Silverlight</span>
		</a>
	</div> 



	<div id="page-search">
        <script>
  (function() {
    var cx = '001595215763381649090:eblhnfskwrk';
    var gcse = document.createElement('script');
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>

    </div>
</div> 


        </header>

        <div id="page-inner-content">
    <div id="page-nav">
        <div id="page-tree"></div>
        <script>
        $("#page-tree").kendoTreeView({
            dataSource: {
                transport: {
                    read: {
                        url: "/devtools/silverlight/default.json",
                        dataType: "json"
                    }
                },
                schema: {
                    model: {
                        id: "path",
                        children: "items",
                        hasChildren: "items"
                    }
                }
            },
            select: preventParentSelection,
            template: navigationTemplate("/devtools/silverlight/"),
            dataBound: expandNavigation("radpivotgrid/features/localdatasourceprovider/datetimegroupdescription.html")
        });
        </script>
    </div>

    <div id="page-article">
        <div id="page-top">
            <div id="page-breadcrumb">
                <ul><li class="link"><a href="/devtools/silverlight/introduction/index">Home</a></li><li class="link"><a href="/devtools/silverlight/radpivotgrid/overview">RadPivotGrid</a></li><li class="link"><a href="/devtools/silverlight/radpivotgrid/features/layouts">Features1</a></li><li class="link"><a href="/devtools/silverlight/radpivotgrid/features/localdatasourceprovider/aggregation-functions">localdatasourceprovider</a></li><li>DateTimeGroupDescription</li></ul>
            </div>
        </div>

        <article>
            <h1 id="datetimegroupdescription"><a href="#datetimegroupdescription">DateTimeGroupDescription</a></h1>

<p>In this article we will show you how to use DateTimeGroupDescription with your DateTime and DateTimeOffset data.</p>

<h2 id="datetimegroupdescription"><a href="#datetimegroupdescription">DateTimeGroupDescription</a></h2>

<p>When using LocalDataSourceProvider you can choose between three types of group description - <em>PropertyGroupDescription, DoubleGroupDescription</em> and <em>DateTimeGroupDescription</em><br>
          (or implement your own group description, which inherits PropertyGroupDescriptionBase). </p>

<p><strong>DateTimeGroupDescription</strong> is used when you want to group your data by property of type <em>DateTime</em> or <em>DateTimeOffset</em>.<br>
          <strong>DateTimeGroupDescription</strong> has the following properties:</p>

<ul>
<li><p><strong>PropertyName</strong> - defines the name of the property by which the data will be grouped. It is mandatory to set a value.</p></li>
<li><p><strong>Step</strong> - defines the grouping interval. Default value is Year, but you can change it to one of the following: Quarter, Month, Week, Day, Hour, Minute, Second.<br>
          If you have the following dates: 01-01-2013 and 20-02-2013 and you set Step to Year, the two values will be in one group - 2013. But if you change the step to Month, the values will be in two<br>
          different groups - January and February.</p></li>
</ul>

<p>When you have a property of type DateTime (DateTimeOffset), you can create several DateTimeGroupDescriptions with different steps. You may also create a PropertyGroupDescription - this way the DateTime will be treated as<br>
          a string and grouped as such. All of them can be used simultaneously. You can add the description in RowGroupDescriptions or ColumnGroupDescriptions collections of LocalDataSourceProvider.</p>

<h4><strong>XAML</strong></h4>

<pre><code>&lt;pivot:LocalDataSourceProvider.RowGroupDescriptions&gt;
    &lt;pivot:DateTimeGroupDescription PropertyName="Date" Step="Quarter"/&gt;
    &lt;pivot:DateTimeGroupDescription PropertyName="Date" Step="Month" /&gt;
    &lt;pivot:PropertyGroupDescription PropertyName="Date"/&gt;
&lt;/pivot:LocalDataSourceProvider.RowGroupDescriptions&gt;
</code></pre>

<h4><strong>C#</strong></h4>

<pre><code>DateTimeGroupDescription dateTimeGroupDescription1 = new DateTimeGroupDescription();
dateTimeGroupDescription1.PropertyName = "Date";
dateTimeGroupDescription1.Step = DateTimeStep.Quarter;
DateTimeGroupDescription dateTimeGroupDescription2 = new DateTimeGroupDescription();
dateTimeGroupDescription2.PropertyName = "Date";
dateTimeGroupDescription2.Step = DateTimeStep.Month;
Telerik.Pivot.Core.PropertyGroupDescription propertyGroupDescription = new Telerik.Pivot.Core.PropertyGroupDescription();
propertyGroupDescription.PropertyName = "Date";

var dataProvider = new LocalDataSourceProvider();
dataProvider.RowGroupDescriptions.Add(dateTimeGroupDescription1);
dataProvider.RowGroupDescriptions.Add(dateTimeGroupDescription2);
dataProvider.RowGroupDescriptions.Add(propertyGroupDescription);
</code></pre>

<h4><strong>VB.NET</strong></h4>

<pre><code>Dim dateTimeGroupDescription1 As New DateTimeGroupDescription()
dateTimeGroupDescription1.PropertyName = "Date"
dateTimeGroupDescription1.Step = DateTimeStep.Quarter
Dim dateTimeGroupDescription2 As New DateTimeGroupDescription()
dateTimeGroupDescription2.PropertyName = "Date"
dateTimeGroupDescription2.Step = DateTimeStep.Month
Dim propertyGroupDescription As New Telerik.Pivot.Core.PropertyGroupDescription()
propertyGroupDescription.PropertyName = "Date"

Dim dataProvider = New LocalDataSourceProvider()
dataProvider.RowGroupDescriptions.Add(dateTimeGroupDescription1)
dataProvider.RowGroupDescriptions.Add(dateTimeGroupDescription2)
dataProvider.RowGroupDescriptions.Add(propertyGroupDescription)
</code></pre>

<p><strong>RadPivotFieldList</strong> automatically detects properties of type DateTime (DateTimeOffset) and creates a special folder in the FieldTree for each of the properties. The name of the folder is the name of the property.<br>
          By default inside the folder you will find out the following structure:<br>
        <img src="images/RadPivotGrid_Features_DateTimeGroup_01.png" alt="Rad Pivot Grid Features Date Time Group 01"></p>

<p>As you can see, the folder gives you the ability to select different steps for your DateTimeGroupDescription at runtime and use them simultaneously. The names of the items are a combination of the property name and a step.<br>
          Only the last item in the folder has different name - it conatins only the property name. When you drag it, you will add the data as PropertyGroupDescription.</p>

<h2 id="modify-fieldtree-of-radpivotfieldlist"><a href="#modify-fieldtree-of-radpivotfieldlist">Modify FieldTree of RadPivotFieldList</a></h2>

<p>By default <strong>RadPivotFieldList</strong> will show the following steps in its FieldTree for each DateTimeGroupDescription: Year, Month, Quarter, Week, Day (you will also see additional item, which will create PropertyGroupDescription instead of DateTimeGroupDescription).<br>
          But you can set three more steps - Hour, Minute, Second. So how to show them in <strong>RadPivotFieldList</strong>?</p>

<p>The solution of this problem is to use AddingContainerNode event of LocalDataSourceFieldDescriptionsProvider. In this event you will receive all items from the FieldTree and you will be able to modify which of them to be visible.<br>
          In order to use this event you have to create a new instance of LocalDataSourceFieldDescriptionsProvider and set LocalDataSourceProvider's FieldDescriptionProvider to this instance. You can do this in XAML or in code behind:</p>

<h4><strong>XAML</strong></h4>

<pre><code>&lt;pivot:LocalDataSourceProvider x:Key="dataProvider" ItemsSource="{StaticResource source}"&gt;
    &lt;pivot:LocalDataSourceProvider.FieldDescriptionsProvider&gt;
        &lt;pivot:LocalDataSourceFieldDescriptionsProvider AddingContainerNode="LocalDataSourceFieldDescriptionsProvider_ContainerNodeAdded_1"/&gt;
    &lt;/pivot:LocalDataSourceProvider.FieldDescriptionsProvider&gt;
&lt;/pivot:LocalDataSourceProvider&gt;
</code></pre>

<h4><strong>C#</strong></h4>

<pre><code>var dataProvider = new LocalDataSourceProvider();
dataProvider.ItemsSource = new Source();
var descriptionProvider = new LocalDataSourceFieldDescriptionsProvider();
descriptionProvider.AddingContainerNode += LocalDataSourceFieldDescriptionsProvider_ContainerNodeAdded;
dataProvider.FieldDescriptionsProvider = descriptionProvider;
</code></pre>

<h4><strong>VB.NET</strong></h4>

<pre><code>Dim dataProvider = New LocalDataSourceProvider()
dataProvider.ItemsSource = New Source()
Dim descriptionProvider = New LocalDataSourceFieldDescriptionsProvider()
descriptionProvider.AddingContainerNode += LocalDataSourceFieldDescriptionsProvider_ContainerNodeAdded
dataProvider.FieldDescriptionsProvider = descriptionProvider
</code></pre>

<p>By using the ContainerNodeEventArgs you are able to access the information foreach ContainerNode in the FieldTree, its children. You can decide whether to include each of the children by using AutoGenerateField property. If you want you can remove the whole container (the folder)<br>
          from the UI, by setting e.Cancel = true:</p>

<ul>
<li>
<strong>Add children to the container node (folder)</strong> - for example you may add Hour Step to the FieldTree:</li>
</ul>

<h4><strong>C#</strong></h4>

<pre><code>void LocalDataSourceFieldDescriptionsProvider_ContainerNodeAdded(object sender, ContainerNodeEventArgs e)
{
    //Use the name of the DateTime property, in our case it is Date
    if (e.ContainerNode.Name == "Date")
    {
        foreach (var containerNode in e.ContainerNode.Children)
        {
            FieldInfoNode fin = containerNode as FieldInfoNode;
            if (containerNode.Name == "Date.Hour")
            {
                //Show Hour from the DateTime tree
                (fin.FieldInfo as PropertyFieldInfo).AutoGenerateField = true;
            }
        }
    }
}
</code></pre>

<h4><strong>VB.NET</strong></h4>

<pre><code>Private Sub LocalDataSourceFieldDescriptionsProvider_ContainerNodeAdded(ByVal sender As Object, ByVal e As ContainerNodeEventArgs)
    'Use the name of the DateTime property, in our case it is Date
    If e.ContainerNode.Name = "Date" Then
        For Each containerNode In e.ContainerNode.Children
            Dim fin As FieldInfoNode = TryCast(containerNode, FieldInfoNode)
            If containerNode.Name = "Date.Hour" Then
                'Show Hour from the DateTime tree
                TryCast(fin.FieldInfo, PropertyFieldInfo).AutoGenerateField = True
            End If
        Next containerNode
    End If
End Sub
</code></pre>

<ul>
<li>
<strong>Remove children from the container node (folder)</strong> - for example you may remove Year Step to the FieldTree:</li>
</ul>

<h4><strong>C#</strong></h4>

<pre><code>void LocalDataSourceFieldDescriptionsProvider_ContainerNodeAdded(object sender, ContainerNodeEventArgs e)
{
    //Use the name of the DateTime property, in our case it is Date
    if (e.ContainerNode.Name == "Date")
    {
        foreach (var containerNode in e.ContainerNode.Children)
        {
            FieldInfoNode fin = containerNode as FieldInfoNode;
            if (containerNode.Name == "Date.Year")
            {
                //Remove Year from the DateTime tree
                (fin.FieldInfo as PropertyFieldInfo).AutoGenerateField = false;
            }
        }
    }
}
</code></pre>

<h4><strong>VB.NET</strong></h4>

<pre><code>Private Sub LocalDataSourceFieldDescriptionsProvider_ContainerNodeAdded(ByVal sender As Object, ByVal e As ContainerNodeEventArgs)
    'Use the name of the DateTime property, in our case it is Date
    If e.ContainerNode.Name = "Date" Then
        For Each containerNode In e.ContainerNode.Children
            Dim fin As FieldInfoNode = TryCast(containerNode, FieldInfoNode)
            If containerNode.Name = "Date.Year" Then
                'Remove Year from the DateTime tree
                TryCast(fin.FieldInfo, PropertyFieldInfo).AutoGenerateField = False
            End If
        Next containerNode
    End If
End Sub
</code></pre>

<ul>
<li>
<strong>Remove the whole container node (folder) from the FieldTree</strong>:</li>
</ul>

<h4><strong>C#</strong></h4>

<pre><code>void LocalDataSourceFieldDescriptionsProvider_ContainerNodeAdded(object sender, ContainerNodeEventArgs e)
{
    //Use the name of the DateTime property, in our case it is Date
    if (e.ContainerNode.Name == "Date")
    {
        e.Cancel = true;
    }
}
</code></pre>

<h4><strong>VB.NET</strong></h4>

<pre><code>Private Sub LocalDataSourceFieldDescriptionsProvider_ContainerNodeAdded(ByVal sender As Object, ByVal e As ContainerNodeEventArgs)
    'Use the name of the DateTime property, in our case it is Date
    If e.ContainerNode.Name = "Date" Then
        e.Cancel = True
    End If
End Sub
</code></pre>

<ul>
<li>
<strong>Remove the whole container node (folder) from the FieldTree and show a single DateTime with chosen Step:</strong>:</li>
</ul>

<h4><strong>C#</strong></h4>

<pre><code>void LocalDataSourceFieldDescriptionsProvider_ContainerNodeAdded(object sender, ContainerNodeEventArgs e)
{
    //Use the name of the DateTime property, in our case it is Date
    if (e.ContainerNode.Name == "Date")
    {
        //Find the children Date.Month and show it.
        FieldInfoNode fin = e.ContainerNode.Children.First&lt;ContainerNode&gt;(cn =&gt; cn.Name == "Date.Month") as FieldInfoNode;
        e.ContainerNode = fin;
    }
}
</code></pre>

<h4><strong>VB.NET</strong></h4>

<pre><code>Private Sub LocalDataSourceFieldDescriptionsProvider_ContainerNodeAdded(ByVal sender As Object, ByVal e As ContainerNodeEventArgs)
    'Use the name of the DateTime property, in our case it is Date
    If e.ContainerNode.Name = "Date" Then
        'Find the children Date.Month and show it.
        Dim fin As FieldInfoNode = TryCast(e.ContainerNode.Children.First(Function(cn) cn.Name = "Date.Month"), FieldInfoNode)
        e.ContainerNode = fin
    End If
End Sub
</code></pre>

<h1 id="see-also"><a href="#see-also">See Also</a></h1>

<ul>
<li><p><a href="/devtools/silverlight/radpivotgrid/getting-started">Getting Started</a></p></li>
<li><p><a href="/devtools/silverlight/radpivotgrid/fieldlist">RadPivotFieldList</a></p></li>
<li><p><a href="/devtools/silverlight/radpivotgrid/populating-with-data/data-localdatasource">LocalDataSourceProvider</a></p></li>
<li><p><a href="/devtools/silverlight/radpivotgrid/features">Features</a></p></li>
</ul>
        </article>
    </div>
</div>

<footer>
    <p>Copyright &copy; 2002-2014 Telerik. All rights reserved.</p>
</footer>


    </body>
</html>

